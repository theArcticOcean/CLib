cmake_minimum_required(VERSION 2.8)

project(CreateCurve)

find_package( VTK REQUIRED )
include( ${VTK_USE_FILE} )

# add header files which are generated by qt
include_directories( ${CMAKE_CURRENT_BINARY_DIR} )

file(GLOB UI_FILES *.ui)
file(GLOB HEADER_FILES
    *.h
    *.hpp
    "../share/tool.h"
    )
file(GLOB CXX_FILES
    *.cxx
    *.cpp
    )

if(${VTK_VERSION} VERSION_GREATER "6" AND VTK_QT_VERSION VERSION_GREATER "4")
  qt5_wrap_ui(UISrcs ${UI_FILES} )
  # CMAKE_AUTOMOC in ON so the MOC headers will be automatically wrapped.
  set( CMAKE_AUTOMOC ON )
  add_executable(${PROJECT_NAME} MACOSX_BUNDLE  ${HEADER_FILES} ${CXX_FILES} ${UISrcs} )
  qt5_use_modules(${PROJECT_NAME} Core Gui)
else()
  QT4_WRAP_UI(UISrcs ${UI_FILES})
  QT4_WRAP_CPP(MOCSrcs ${HEADER_FILES})
  add_executable(${PROJECT_NAME} MACOSX_BUNDLE ${CXX_FILES} ${UISrcs} ${MOCSrcs})
endif()

target_link_libraries( ${PROJECT_NAME} ${VTK_LIBRARIES} )
